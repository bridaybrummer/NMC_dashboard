---
title: "NMC"
author: "Brian Brummer"
format:
  dashboard:
    theme: cosmo
    embed-resources: true
    scrolling: true
#    logo: images/NICD_logo.png
# Optional: add a CSS to make lots of tabs scrollable on one line
# format:
#   dashboard:
#     css: styles.css
---

[ðŸ  Home](../index.html){.btn .btn-primary}


# Dashboard Plan 


# Overviews  

## Overview  {.tabset}

### Data quality and sources 

#### Data sources   {.tabset}

##### Case Types

```{r}
#| results: asis
#| fig-show: asis

# NMCleaner::condition_df$condition[c(5)]
# NMCleaner::condition_df$condition[c(1:27)] # all category 1s
# Loop through each condition and generate the epicurves
c(NMCleaner::condition_df$condition[c(
    5, # cholera
    6, # COVID
    7, # CRS,
    8, # Diphtheria
    12, # Listeriosis
    16, # Measles
    17, # Meningococcal
    18, # mpox
    25 # Rubella
)], "Fever-Rash", "Agricultural or stock remedy poisoning") -> conditions_list

# for (condition in conditions_list) {
#  tabulate_case_incidence(data = new_master, condition_select = condition)
# }

# abulate_case_incidence(data = new_master, condition_select = "Cholera")
for (condition in conditions_list) {
    tryCatch(
        {
            # Print the current condition being processed
            # print(condition)

            # Print markdown headers for the condition
            cat("###", condition, "\n")
            cat("####", condition, "{.tabset}\n")

            # Epicurve header
            cat("##### Epicurve\n")
            cat("Insert Epicurve plot here\n\n")
            # cat(knit_print(plotly_dashboard(the_last_year, condition)))

            # Decomposition
            cat("##### Decomposition\n")
            cat("Insert decomposition plot here\n\n")
            # cat(knit_print(decompose_condition(data = df_with_ears, condition_select = condition)))


            # Map placeholder
            cat("##### Map\n")
            cat("Notification counts map\n\n")
            # cat(knit_print(map_n(data = new_master, condition_select = condition)))

            cat("Notification Incidence map\n\n")
            # cat(knit_print(map_incidence(data = new_master, condition_select = condition)))

            cat("Incidence Table\n\n")
            # cat(knit_print(tabulate_case_incidence(data = new_master, condition_select = condition)))

            # Descriptive Table header
            cat("##### Descriptive table\n\n")
            cat("Insert descriptive table here\n\n")
            # cat(flextable_to_rmd(descriptive_table( condition_select=condition)))
            # cat( print( "The table should be here"))

            # Add a spacer between conditions
            cat("\n\n")
        },
        error = function(e) {
            # Print error message and the condition causing the error
            cat("\nError encountered in condition:", condition, "\n")
            print(e)
        }
    )
}

# Table of demographs
# table of facilities 



```

